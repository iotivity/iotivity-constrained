Java Language binding for IoTivity-lite using SWIG
-------------------------------------------------

Introduction
=================================================
This uses a tool called SWIG to generate Java language bindings for
IoTivity-lite.  SWIG is an interface compiler that connect programs written
in C and C++ with other languages such as Java.

SWIG is not a stubs generator. It produces code that can be compiled and
used. The output is generated by a tool.  For this reason there is not fancy
encapsulation of the code to make it appear more like what most
developers would expect when using Java code.  The output is not organized
into classes. The output classes with very few exceptions are just a
collection of static methods.  This has both the advantage and disadvantage
that the way to code is used in Java is similar to the way it is used in C.
This means the code does not resemble what a typical Java programmer expects
but it is easy for someone familiar with the C code to flow the flow of the
code.

The Java output is still in early development and is expected to change.
Since the Java output is just a thin layer on top of IoTivity-lite C code any
programs developed using Java are expected to be as stable as the underlying
C code.

Since the work is still in an early stage feedback and bug reports are welcome
please send them to George Nash george.nash (at) intel.com

Getting Started
=================================================
To use this code you will need the following:
  - git software control system
  - A local copy of IoTivity-lite
  - SWIG installed on your local system
  - Java Development kit.
  - C and C++ build tool for your desired system

### Get git
<!--TODO-->

### Get Iotivity-Lite
Checkout IoTivity-lite git project run the following command to get a anonymous
copy of iotivity-lite (a.k.a. iotivity-constrained).  Checkout the SWIG branch.

    git clone https://gerrit.iotivity.org/gerrit/iotivity-constrained
    git checkout -t origin/swig

Since this is an anonymous download you will not be able to push any changes
up to the project. IoTivity is managed by the Linux Foundation.  If you are
planning on contributing back to IoTivity you will need to have a
[Linux Foundation ID](https://identity.linuxfoundation.org/).  The Linux
Foundation ID can then be used to log into the Gerrit server for IoTivity-lite.
[gerrit.iotivity.org](https://gerrit.iotivity.org/gerrit/#/admin/projects/iotivity-constrained)

Follow the instruction [here](https://wiki.iotivity.org/how_to_use_gerrit)
to gain push access to the project.

### Get SWIG
SWIG can be download [here](http://swig.org/download.html).

It can be installed on Ubuntu Linux using the following command.

    sudo apt-get install swig



### Get Java Development Kit
The SWIG output should work with Java 6 and newer. The Output has been
tested against Oracle Java 8 and OpenJDK 1.8.-------------------------------------------------------------------------------------------------------------


Oracle Java 8 JDK can be
[downloaded here](https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html).

On Ubuntu Linux OpenJDK can be downloade using the following command. 

    apt-get search openjdk
    sudo apt-get install openjdk-8-jdk
    # You may wish to choose a different version of openjdk
    # if you have installed multiple versions of Java you may need to switch
    # the active version using the update-java-alternatives tool.
    sudo apt-get install java-common
    update-java-alternatives

Install OpenJDK on Fedora Linux

    dnf search openjdk
    sudo dnf install java-1.8.0-openjdk.x86_64
    # or use dnf install <openjdk-package-name>
    # if you have installed multiple versions of Java you may need to switch
    # the active version
    sudo alternatives --config java

### C Build tools
#### Windows
For developement on Windows Visual Studio 2015 was used. The Visual Studio
solution files have been tested in newer version of Visual Studio and
have been found to work. Visual studio IDE Community edition and Visual
Studio Code should work but have not personally been tested. If you find that
the compiler does not work please give us feed back.

Download Visual Studio [here](https://visualstudio.microsoft.com/). 

#### Linux
For Linux GCC compiler was used

    sudo apt-get build-essential git

### Verify installation of needed tools
The scripts used assume all the needed tools are on PATH and are accessible
without knowing the location of the tool.

Run the following to verify each tool

---
bash shell (windows only) For me this was installed with git

    sh --version

example of expected output

    GNU bash, version 4.4.12(2)-release (x86_64-pc-msys)
    Copyright (C) 2016 Free Software Foundation, Inc.
    License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>

---
git

    git --version

example of expected output

    git version 2.16.1.windows.1

---
SWIG

    swig -version

example of expected output

    SWIG Version 3.0.12
    Compiled with i686-w64-mingw32-g++ [i686-w64-mingw32]
    Configured options: +pcre
    Please see http://www.swig.org for reporting bugs and further information

---
Java

    java -version
    javac -version

example of expected output

    java version "1.8.0_144"
    Java(TM) SE Runtime Environment (build 1.8.0_144-b01)
    Java HotSpot(TM) 64-Bit Server VM (build 25.144-b01, mixed mode)

    javac 1.8.0_144

Building
=================================================
<!-- TODO -->
### Windows Instructions
Navigate to `<iotivity-lite>/swig/java_lang`
run the following

    sh build_swig.sh

This will generate several C and C++ files in the same directory as the
`build_swig` script.  It will also generate many `*.java` files in the
`<iotivity-lite>/swig/iotivity-lite-eclipse-project/src/org/iotivity`
directory. It will also copy the files found in `<iotivity-lite>/swig/oc_java`
eclipe-project directory.

Navigate to `<iotivity-lite>/port/windows/vs2015` open the Visual Studio
solution `IoTivity-Constrained.sln` file in Visual Studio.

Select the desired build options: Release/Debug, x86/x64. Note the x86/x64
must match the architecture of the Java VM that will be reading the library.
For example above when we run `java -version` we get
`Java HotSpot(TM) 64-Bit Server VM` this means we must select the x64
architecture for the build options. In the Solution Explorer right click on
the `iotivity-lite-jni` project. Select the `Build` option.

This will build
  - `IoTivity-Constrained.lib`
  - `iotivity-lite-jni.dll`

On success the Output window should show:

    ========== Build: 2 succeeded, 0 failed, 0 up-to-date, 0 skipped ==========


Build `iotivity-lite.jar` file:

    sh build-iotivity-lite.sh

Testing and Verifying
=================================================
<!-- TODO -->

Layout of SWIG code
=================================================